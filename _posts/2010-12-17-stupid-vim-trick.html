---
layout: post
status: publish
published: true
title: Stupid vim trick
author:
  display_name: cout
  login: cout
  email: curlypaul924@gmail.com
  url: ''
author_login: cout
author_email: curlypaul924@gmail.com
wordpress_id: 43
wordpress_url: http://nonstandard-output.rubystuff.org/?p=43
date: '2010-12-17 11:09:46 -0500'
date_gmt: '2010-12-17 16:09:46 -0500'
categories:
- vim
tags: []
comments: []
---
<p>I decided yesterday to play with <a href="http://http://vimdoc.sourceforge.net/htmldoc/autocmd.html">autocmd</a>:</p>
<pre lang="vim">
function EditFileLine(file_line)
  let file = substitute(a:file_line, '\(.*\):\(.*\)', '', '')
  let line = substitute(a:file_line, '\(.*\):\(.*\)', '', '')
  exe "ed" file
  normal gg
  exe +line

  hi CursorLine   cterm=NONE ctermbg=darkcyan ctermfg=black guibg=darkcyan guifg=black
  setlocal cursorline
  " au CursorMoved * setlocal nocursorline
endfunction

au BufNewFile *:* call EditFileLine(expand("<afile>:p"))
</pre>
<p>I had gotten tired of highlighting the file:line output in a gcc error message, only to paste it and have backspace to remove the line number.  This code will parse the file:line string, open the file, jump to the line, and lastly highlight the line that was jumped to.</p>
<p>Actually, it highlights the line under the cursor.  I wanted to turn the highlight off whenever the cursor is moved, but I'll settle for this.  (My feeble attempts at using autocmd CursorMoved to disable the highlight caused the highlight to disappear altogether; I'm guessing that vim moves the cursor again at some point after the BufNewFile autocmd is complete).</p>
<p>Sample usage:</p>
<pre lang="bash">
$ vim File.cpp +58 # before I had to type this
$ vim File.cpp:58  # now I can type this
</pre>
<p>It's odd how few examples I could find on the web that 1) use the <a href="http://vimdoc.sourceforge.net/htmldoc/eval.html#substitute%28%29">substitute</a>() function with match groups, 2) reference <a href="http://vimdoc.sourceforge.net/htmldoc/eval.html#a:var">function arguments</a> (need to use the a: prefix), or 3) demonstrate how to use the <a href="http://vimdoc.sourceforge.net/htmldoc/eval.html#:execute">execute</a> and <a href="http://vimdoc.sourceforge.net/htmldoc/various.html#:normal">normal</a> commands (the former is like typing a : in normal mode and then a command, while the latter is like playing back a macro from a function to simulate keypresses).</p>
<p>Some people might suggest that I learn how to use :make and :cope, and others might suggest that I use emacs.  I stopped using an IDE over ten years ago when I stopped using <a href="http://edn.embarcadero.com/article/20841">Turbo C</a> and <a href="http://www.rhide.com/">RHIDE</a>, so I've been using the command line for too long to be comfortable with either of those "solutions".</p>
